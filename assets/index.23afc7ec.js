var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,i=(e,t)=>{for(var o in t||(t={}))n.call(t,o)&&s(e,o,t[o]);if(r)for(var o of r(t))a.call(t,o)&&s(e,o,t[o]);return e};import{e as c,n as l,p as d,d as u,m as p,h as m,s as f,r as _,l as h,a as g,P as y,R as w,S as b,B as E,U as v,M as O,b as x,c as L,f as P,g as j}from"./vendor.20bd6f23.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const k={200:"服务器成功返回请求的数据。",201:"新建或修改数据成功。",202:"一个请求已经进入后台排队（异步任务）。",204:"删除数据成功。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",406:"请求的格式不可得。",410:"请求的资源被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"},I=c({errorHandler:e=>{const{response:t}=e;if(t&&t.status){const e=k[t.status]||t.statusText,{status:o,url:r}=t;l.error({message:`请求错误 ${o}: ${r}`,description:e})}else t||l.error({description:"您的网络发生异常，无法连接服务器",message:"网络异常"});return t},credentials:"include"});async function R(e){return I(`/api/login/captcha?mobile=${e}`)}const T=()=>d(window.location.href.split("?")[1]),D=u({state:{status:"",type:""},reducer:{login:async(e,t,o)=>{const r=await async function(e){return I("/api/login/account",{method:"POST",data:e})}(e);if(o.dispatch(D.reducer.changeLoginStatus,r),"ok"===r.status){localStorage.setItem("status","ok");const e=new URL(window.location.href),t=T();p.success("🎉 🎉 🎉  登录成功！");let{redirect:o}=t;if(o){if(new URL(o).origin!==e.origin)return void(window.location.href="/");o=o.substr(e.origin.length),"/"!==window.routerBase&&(o=o.replace(window.routerBase,"/")),o.match(/^\/.*#/)&&(o=o.substr(o.indexOf("#")+1))}m.replace(o||"/")}},logout(){localStorage.removeItem("status");const{redirect:e}=T();"/user/login"===window.location.pathname||e||m.replace({pathname:"/user/login",search:f({redirect:window.location.href})})},changeLoginStatus:e=>({status:e.status,type:e.type})}});const S=u({state:{address:"",avatar:"",email:"",name:"",position:""},reducer:{fetchMe:async()=>(await async function(){return I("/api/me")}()).data}});_({login:D,me:S,counter:{state:{num:1,max:100}}},{plugins:[h]});const A={},B=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/vite-react/${e}`)in A)return;A[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e())):e()};var V=[{url:"/api/login/account",method:"post",timeout:240,response:({body:e})=>{const{password:t,userName:o,type:r}=e;return"vite-react"===t&&"admin"===o?{status:"ok",type:r,authority:"admin"}:"vite-react"===t&&"user"===o?{status:"ok",type:r,authority:"user"}:"mobile"===r?{status:"ok",type:r,authority:"admin"}:{status:"error",type:r,authority:"guest"}}},{url:"/api/login/captcha",method:"get",timeout:240,response:()=>({code:0,data:"captcha-xxx"})},{url:"/api/me",method:"get",timeout:240,response:()=>({code:0,data:{address:"广东深圳",avatar:"https://avatars.githubusercontent.com/u/18096089?s=460&u=ac70c17caf8cb7e48d0a4f8b8ef28825688cbb8d&v=4",email:"yuns.xie@qq.com",name:"云深",position:"前端开发工程师"}})}];function $(e){return`${"/"===window.routerBase?"":window.routerBase}${e}`.replace(/\/\//g,"/")}function M(e=0){e&&O.setup({timeout:e})}function N(e){const t=e.split("?")[1];return t?JSON.parse('{"'+decodeURIComponent(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function q(e){const t=i({},e);return(null==e?void 0:e.method)||(t.method="GET"),(null==e?void 0:e.body)&&(t.body=function(e){try{return JSON.parse(e)}catch(t){return console.log("loadBody error",t),e}}(e.body)),t}function C(e,r,n){let a=O.XHR._settings.timeout||"200-400";if("string"==typeof a){const e=a.split("-").map((e=>parseInt(e)));a=e[0]+Math.round(Math.random()*(e[1]-e[0]))}return new Promise((s=>{const c="function"==typeof n.template?n.template.call(this,{query:N(e),body:null==r?void 0:r.body,headers:null==r?void 0:r.headers}):O.mock(n.template);setTimeout((()=>{const e={status:200,text:()=>Promise.resolve(JSON.stringify(c)),json:()=>Promise.resolve(c),blob:()=>Promise.resolve(c),formData:()=>Promise.resolve(c),arrayBuffer:()=>Promise.resolve(c)};var r;s((r=i({},e),t(r,o({clone:()=>e}))))}),a)}))}!function(){if(!O||!O.mock)throw new Error("Mock.js is required.");window.__fetchBackup__||(window.__fetchBackup__=window.fetch,window.fetch=function(e,t){const o=$(e),r=q(t),n=r.method;console.log(`${n} ${o}`,"init: ",r);const a=O._mocked,s=Object.keys(a).find((e=>{const t=a[e],n="string"==typeof t.rurl&&t.rurl.indexOf(o)>=0||t.rurl instanceof RegExp&&t.rurl.test(o),s=!t.rtype||t.rtype.toLowerCase()===r.method.toLowerCase();return n&&s}));return s?C(o,r,a[s]):window.__fetchBackup__(e,t)})}(),function(e){for(const{url:t,method:o,response:r,timeout:n}of e)M(n),O.mock(new RegExp($(t)),o||"get",r)}(V),x.render(L.exports.createElement(L.exports.StrictMode,null,L.exports.createElement(P,{history:m},j({routes:[{path:"/",component:g({loader:()=>B((()=>import("./BlankLayout.6b308e17.js")),["assets/BlankLayout.6b308e17.js","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css"]),loading:y}),routes:[{path:"/user",component:g({loader:()=>B((()=>import("./UserLayout.dab85af2.js")),["assets/UserLayout.dab85af2.js","assets/UserLayout.193c0f16.css","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css","assets/index.e85ade3f.js"]),loading:y}),routes:[{name:"登录",path:"/user/login",component:g({loader:()=>B((()=>import("./index.c9eaba79.js")),["assets/index.c9eaba79.js","assets/index.cf913d11.css","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css","assets/TextArea.e65632cc.js","assets/TextArea.e65a99f8.css","assets/concent.b4a6e58e.js"]),loading:y}),exact:!0}]},{path:"/",component:g({loader:()=>B((()=>import("./SecurityLayout.ea9aa95a.js")),["assets/SecurityLayout.ea9aa95a.js","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css"]),loading:y}),routes:[{path:"/",component:g({loader:()=>B((()=>import("./BasicLayout.4c45ff34.js")),["assets/BasicLayout.4c45ff34.js","assets/BasicLayout.e87e31b7.css","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css","assets/index.e85ade3f.js"]),loading:y}),routes:[{path:"/",redirect:"/welcome",exact:!0},{path:"/welcome",icon:w.createElement(b),name:"欢迎页",component:g({loader:()=>B((()=>import("./index.d1a7dcc8.js")),["assets/index.d1a7dcc8.js","assets/index.a4bd4d80.css","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css","assets/index.64d0a68e.js","assets/index.79f3b052.css","assets/TextArea.e65632cc.js","assets/TextArea.e65a99f8.css"]),loading:y}),exact:!0},{path:"/concent",icon:w.createElement(E),name:"Concent Demo",routes:[{path:"/concent/hello-world",name:"Hello World",component:g({loader:()=>B((()=>import("./index.5d5d1eec.js")),["assets/index.5d5d1eec.js","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css","assets/index.64d0a68e.js","assets/index.79f3b052.css","assets/concent.b4a6e58e.js"]),loading:y}),exact:!0}]},{path:"/account",icon:w.createElement(v),name:"个人页",routes:[{path:"/account/center",name:"个人中心",component:g({loader:()=>B((()=>import("./index.d0982fbd.js")),["assets/index.d0982fbd.js","assets/index.3bb4b90a.css","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css","assets/index.64d0a68e.js","assets/index.79f3b052.css","assets/index.4a4ecb2b.js"]),loading:y}),exact:!0},{path:"/account/settings",name:"个人设置",component:g({loader:()=>B((()=>import("./index.246b5f71.js")),["assets/index.246b5f71.js","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css","assets/index.64d0a68e.js","assets/index.79f3b052.css","assets/index.4a4ecb2b.js"]),loading:y}),exact:!0}]}]},{component:g({loader:()=>B((()=>import("./404.1128c553.js")),["assets/404.1128c553.js","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css"]),loading:y}),exact:!0}]},{component:g({loader:()=>B((()=>import("./404.1128c553.js")),["assets/404.1128c553.js","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css"]),loading:y}),exact:!0}]},{component:g({loader:()=>B((()=>import("./404.1128c553.js")),["assets/404.1128c553.js","assets/vendor.20bd6f23.js","assets/vendor.6a4a5bd9.css"]),loading:y}),exact:!0}]}))),document.getElementById("root"));export{R as g};
